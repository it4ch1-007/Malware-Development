# DLL HIJACKING 

- Command to compile the c file into dll using VSCODE buildtools command line prompt
```
cl.exe /D_USRDLL /D_WINDLL dll.c /link/DLL /OUT:mal.dll
```

- The DLL will be injected inside the dll_loader.exe file as it loads the dll file as a  library using LoadLibrary() function.

- We can get reverse shell too using reverse shell DLLs as we inject the dll inside the victim's computer's exe file and then start to give connected shell to our own ip and port .

- DLL proxying is to put the malicious dll in the very similar path to the legitimate dll that will tempt the exe to load the malicious dll inastead of the legitimate one causing malicious activities inside it.

![Alt text](image.png)

- In above pragma comments we are trying to give the exports of the exe file the exprts that our dll want to do instead of what it is supposed to.

- For the compilation of these types of DLLs we will use the path of the DLLs that are inside the depth of the system like System32,user32,etc. , we need to add the path to the commsnd too:

```
cl.exe /D_USRDLL /D_WINDLL dll.c /link/DLL /OUT:mal.dll /LIBPATH="C:Users/System32"
```

- Using this the exports will be same but they will act as pointers to our own original DLL that have malicious exports.

- The dll will have to be placed inside the same directory as all other dlls used by the standard exes of the system like (explorer.exe). Thus when we open a legit process inside the system then we will be able to spawn our DLL ultimately without launching any malicious exe file.


